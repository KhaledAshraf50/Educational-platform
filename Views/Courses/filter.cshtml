@using Luno_platform.Viewmodel
@model filter_coursesviewmodel

@{
    Layout = "~/Views/Shared/_navbar.cshtml";

}

<link rel="stylesheet" href="~/assets/css/style_filtercourses.css">

<div class="">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1 class="header-title">اكتشف الكورسات المتاحة</h1>
            <p class="header-subtitle">استكشف مجموعتنا من الكورسات المتخصصة المصممة لمساعدتك على النمو</p>
        </div>
    </header>

    <div class="main-wrapper">
        <!-- Sidebar Filter -->
        <form asp-controller="courses" asp-action="filter" method="post"  >
            <aside class="filter-sidebar">
                <div class="filter-header">
                    <h2 class="filter-title">الفلاتر</h2>
                    
                </div>

                <!-- Search Filter -->
                <div class="filter-group">
                    <label class="filter-label">البحث عن كورس</label>
                    <div class="search-wrapper">
                        <input asp-for="coursesname" value="@Model.coursesname" type="text"
                               id="searchInput"
                               class="filter-input search-input"
                               placeholder="ابحث باسم الكورس...">
                       
                    </div>
                </div>

            
          

                <!-- Price Range Filter -->
                <div class="filter-group">
                    <label class="filter-label">نطاق السعر</label>
                    <div class="price-range">
                        <div class="price-input">
                            <label class="price-label">الحد الأدنى</label>
                            <input asp-for="MinPrice" type="range"
                                   id="minPrice"
                                   class="price-slider"
                                   min="0"
                                   max="1000"
                                   value="@(Model.MinPrice ?? 0)">
                            <span class="price-value" id="minPriceValue">@(Model.MinPrice ?? 0)</span>
                        </div>
                        <div class="price-input">
                            <label class="price-label">الحد الأقصى</label>
                            <input asp-for="MaxPrice" type="range"
                                   id="maxPrice"
                                   class="price-slider"
                                   min="0"
                                   max="1000"
                                   value="@(Model.MaxPrice ?? 1000)">
                            <span class="price-value" id="maxPriceValue">@(Model.MaxPrice ?? 1000)</span>
                        </div>
                    </div>
                </div>

                <!-- Subject Filter -->
                <div class="filter-group">
                    <label class="filter-label">المادة</label>
                    <select asp-for="subjectid" id="subjectFilter" class="filter-select">
                        <option value="">جميع المواد</option>
                        <option value="1">اللغة العربية</option>
                        <option value="2">اللغة الإنجليزية</option>
                        <option value="3">الرياضيات</option>
                        <option value="4">الكيمياء</option>
                        <option value="5">الفيزياء</option>
                        <option value="6">الأحياء</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label class="filter-label">المادة</label>
                    <select asp-for="Level" id="subjectFilter" class="filter-select" >
                        <option value="">جميع المستويات</option>
                        <option value="1">الصف الاول الثانوي</option>
                        <option value="2">الصف الثاني الثانوي</option>
                        <option value="3">الصف الثالث الثانوي</option>
                    </select>
                </div>

               

                <!-- Reset Button -->
                <button type="submit" class="reset-btn" >بحث</button>
            </aside>

        </form>
       
        <!-- Main Content -->
        <main class="main-content">
            <!-- Courses Grid -->
            <div class="courses-grid" id="coursesGrid">

                @if(Model.Courses==null)
                {


                    <h3 class="empty-title">لم يتم العثور على كورسات</h3>

                }

                @foreach (var course in Model.Courses)
                {

                    <div class="card-courses">
                        <div class="image-courses"> <img class="" src="@Url.Content(course.Image)" alt=""></div>
                        <div class="body-course">
                            <div class="bodytop">
                                <div class="bodyright">
                                    <div class="brtop">
                                        <p> @course.CourseName </p>
                                    </div>
                                    <div class="brmid">
                                        <p>
                                            @course.description
                                        </p>
                                    </div>
                                    <div class="brdowm">
                                    </div>

                                </div>
                                <div class="bodyleft">
                                    <a href="/Homepage/show_details_courses/@course.CourseId" class="enroll-btn btn"> الدخول للكوس</a>
                                    @* <form asp-controller="Payment" asp-action="Pay" method="post">
                                        <input type="hidden" name="courseId" value="@course.CourseId" />
                                        <input type="hidden" name="amount" value="@course.price" />
                                        <button type="submit" class="enroll-btn btn">
                                            اشترك الآن
                                        </button>
                                    </form> *@
                                </div>

                            </div>
                            <div class="bodybuttom">
                                <div class="price">
                                    <span>@course.price</span> جنيهًا
                                </div>
                                <div class="date">
                                    <h5>
                                        @course.createdAt.ToString("dd/MM/yyyy")
                                    </h5>

                                </div>
                            </div>

                        </div>

                    </div>


                }
              
               
               
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"></path>
                    </svg>
                </div>
                <h3 class="empty-title">لم يتم العثور على كورسات</h3>
                <p class="empty-text">حاول تعديل الفلاتر للعثور على ما تبحث عنه</p>
            </div>
        </main>
    </div>
</div>

<script>
    const minPriceSlider = document.getElementById('minPrice');
    const maxPriceSlider = document.getElementById('maxPrice');
    const minPriceValue = document.getElementById('minPriceValue');
    const maxPriceValue = document.getElementById('maxPriceValue');

    minPriceSlider.addEventListener('input', () => {
        minPriceValue.textContent = minPriceSlider.value;
    });

    maxPriceSlider.addEventListener('input', () => {
        maxPriceValue.textContent = maxPriceSlider.value;
    });
</script>
