@using System.Security.Claims
<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- رابط CSS الخاص بـ -->
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    @* <link rel="stylesheet" href="~/assets/css/bootstrap.min.css"> <!-- Bootstrap--> *@
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"><!-- icon-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="~/assets/css/Student_registration_page_m.css">
    <link rel="stylesheet" href="~/assets/css/teacher_login.css">
    <link rel="stylesheet" href="~/assets/css/Login_page.css">
    <link rel="stylesheet" href="~/assets/css/navbar.css">
    @RenderSection( "Styles",  false))
    <!-- الملفات الخاصه با الخط -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <title> Educational</title>
</head>

<style>
    .image_porfoile_simple {
        display: flex; /* لترتيب العناصر جنباً إلى جنب */
        align-items: center; /* لمحاذاة الصورة والرابط عمودياً في المنتصف */
        gap: 10px; /* مسافة بسيطة بين الصورة والرابط */
        cursor: pointer;
        margin-right: 20px;
    }

        /* -------------------------------------- */
        /* تنسيقات الصورة (Avatar) */
        /* -------------------------------------- */

        .image_porfoile_simple img {
            width: 45px;
            height: 45px;
            border-radius: 50%; /* لجعل الصورة دائرية */
            object-fit: cover;
            display: block;
        }

    /* -------------------------------------- */
    /* تنسيقات رابط الخروج (Logout Link) */
    /* -------------------------------------- */

    .logout-link-simple {
        text-decoration: none;
        font-size: 15px;
        font-weight: 600;
        color: #e74c3c; /* اللون الأحمر الذي طلبته (القيمة الثابتة لـ --accent-color) */
        transition: opacity 0.3s ease;
        padding: 5px 10px; /* لإعطائه مساحة عند المرور */
        border-radius: 4px;
    }

        .logout-link-simple:hover {
            color: #c0392b; /* لون أحمر أغمق قليلاً عند المرور */
            background-color: #ffeaea; /* خلفية فاتحة عند المرور */
        }

    /* .dropdown-menu {
        border-radius: 12px;
        padding: 10px 0;
    }

    .dropdown-item {
        padding: 10px 15px;
        transition: 0.2s;
    }

        .dropdown-item:hover {
            background-color: #f5f5f5;
        } */
    /* إجبار الصورة تظهر على اليمين */
    /* لضبط الدروب داون يمين */
    /* Container */
    .profile-dropdown {
        position: relative;
        display: inline-block;
        cursor: pointer;
        margin:0 0 0 30px;
    }

    /* الصورة */
    .profile-img {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        object-fit: contain ;
        display: block;
        border: 2px solid #eef6ff;
    }

    /* القائمة المنسدلة */
    .dropdown-content {
        display: none; 
        position: absolute;
        left: 0; 
        top:40px;
        background-color: #fff;
        min-width: 180px;
        box-shadow: 0 8px 18px rgba(0,0,0,0.1);
        border-radius: 12px;
        z-index: 1000;
        text-align: right; /* RTL */
    }

        /* روابط داخل القائمة */
        .dropdown-content a {
            display: block;
            padding: 10px 15px;
            text-decoration: none;
            color: #092c4c;
            font-weight: 500;
            transition: background 0.2s;
        }

            .dropdown-content a:hover {
                background-color: #f5f5f5;
            }

        /* خط فاصل */
        .dropdown-content hr {
            margin: 5px 0;
            border: none;
            border-top: 1px solid #e0e0e0;
        }

    /* Logout link */
    .logout-link {
        color: #e74c3c;
    }

        .logout-link:hover {
            background-color: #ffeaea;
            color: #c0392b;
        }

    /* إظهار القائمة عند hover على الصورة */
    .profile-dropdown:hover .dropdown-content {
        display: block;
    }




</style>

<!--  -->


<body class="">

<!-- Start Navbar -->
<div class="navbar navbar-expand-lg shadow-sm" style="padding: 0px;">
    <div class="container-fluid my-navbar">

        <!-- Logo + Links -->
            <div class="part1nav">
                <div class="logo-container d-flex justify-content-center align-items-center" style=" width:120px; height:85px;">
                    <a href="#" style=" width:100%; display:flex; justify-content:center; align-items:center;  ">
                        <img class="logo" src="~/assets/imgs/logo.svg" alt="Logo">
                    </a>
                </div>

                <div class="nav-links d-flex justify-content-center align-items-center gap-4">
                    <a href="/homepage#mainsection" class="nav-item-link">الرئيسية</a>
                    <a href="/homepage/show_all_teacher" class="nav-item-link">المدرسين</a>
                    <a href="/courses/filter" class="nav-item-link">الكورسات</a>



                    @* <a href="/Parent/MainPage" class="nav-item-link">ولي الامر</a>
                    <a href="/Student/MainPage" class="nav-item-link">الطالب</a>

                    <a href="#" class="nav-item-link">المعلم</a>
                    <a href="/Admin/mainpage" class="nav-item-link">الادمن </a> *@
                </div>
            </div>
            


            <!-- Buttons + Menu -->
            <div class="buttons-container">

                @if (User.Identity.IsAuthenticated)
                {


                    <!-- لو المستخدم داخل -->
                    <div class="image_porfoile_simple">
                        @if (User.IsInRole("student"))
                        {
                           
                            <div class="profile-dropdown">
                                <img src="~/assets/imgs/user_image.png" class="profile-img" />


                                <div class="dropdown-content">
                                    <a asp-controller="Student" asp-action="MainPage"><i class="bi bi-person"></i> الصفحة الشخصية</a>
                                    <a asp-controller="Student" asp-action="SettingPage"><i class="bi bi-gear"></i> الإعدادات</a>
                                    <hr>
                                    <a href="/Account/Logout" class="logout-link"><i class="bi bi-box-arrow-right"></i> تسجيل الخروج</a>
                                </div>
                            </div>



                        }
                        else if (User.IsInRole("instructor"))
                        {
                            <div class="profile-dropdown">
                                <img src="~/assets/imgs/user_image.png" class="profile-img" />



                                <div class="dropdown-content">
                                    <a asp-controller="instructor" asp-action="Index"><i class="bi bi-person"></i> الصفحة الشخصية</a>
                                    <a asp-controller="instructor" asp-action="Settings"><i class="bi bi-gear"></i> الإعدادات</a>
                                    <hr>
                                    <a href="/Account/Logout" class="logout-link"><i class="bi bi-box-arrow-right"></i> تسجيل الخروج</a>
                                </div>
                            </div>
                        }
                        else if (User.IsInRole("parent"))
                        {
                            <div class="profile-dropdown">
                                <img src="~/assets/imgs/user_image.png" class="profile-img" />


                                <div class="dropdown-content">
                                    <a asp-controller="parent" asp-action="MainPage"><i class="bi bi-person"></i> الصفحة الشخصية</a>
                                    <a asp-controller="parent" asp-action="Settings"><i class="bi bi-gear"></i> الإعدادات</a>
                                    <hr>
                                    <a href="/Account/Logout" class="logout-link"><i class="bi bi-box-arrow-right"></i> تسجيل الخروج</a>
                                </div>
                            </div>
                        }
                        else if (User.IsInRole("admin"))
                        {
                            <div class="profile-dropdown">
                                <img src="~/assets/imgs/user_image.png" class="profile-img" />


                                <div class="dropdown-content">
                                    <a asp-controller="admin" asp-action="mainpage"><i class="bi bi-person"></i> الصفحة الشخصية</a>
                                    <a asp-controller="admin" asp-action="setting"><i class="bi bi-gear"></i> الإعدادات</a>
                                    <hr>
                                    <a href="/Account/Logout" class="logout-link"><i class="bi bi-box-arrow-right"></i> تسجيل الخروج</a>
                                </div>
                            </div>
                        }
                       
                        @* <a href="/Account/Logout" class="logout-link-simple">خروج</a> *@
                    </div>
                }
                else
                {
                    <!-- لو المستخدم مش عامل تسجيل دخول -->
                    <form action="/Account/Login">
                        <button type="submit" class="btn1 loginbtn">تسجيل دخول</button>
                    </form>
                    <form action="/Account/role">
                        <button type="submit" class="btn1">إنشاء حساب</button>
                    </form>
                }

                <i class="fas fa-bars iconmenu"></i>
            </div>

        <!-- Mobile Menu -->
        <div class="buttomsmallscreen">
            <span class="close-btn">&times;</span>
                <a href="/Homepage/mainpage" class="">الرئيسية </a>

                <a href="/Homepage/login_in">تسجيل دخول</a>
                <a href="/Homepage/sign_up" >إنشاء حساب</a>
            </div>

    </div>
</div>
<!-- End Navbar -->

@RenderBody()


    <script>
        const dropdown = document.querySelector('.dropdown');

        dropdown.addEventListener('mouseenter', () => {
            const menu = dropdown.querySelector('.dropdown-menu');
            menu.classList.add('show');
        });

        dropdown.addEventListener('mouseleave', () => {
            const menu = dropdown.querySelector('.dropdown-menu');
            menu.classList.remove('show');
        });
    </script>


    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script src="~/assets/js/governorates.js"></script>
    <script src="~/assets/js/swaper.js"></script>
    <script src="~/assets/js/buttom.js"></script>
    <script src="~/assets/js/main.js"></script>
    <script src="~/assets/js/pages.js"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@3.2.12/dist/jquery.validate.unobtrusive.min.js"></script>


</body>

</html>
