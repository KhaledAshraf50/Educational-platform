@using Luno_platform.Viewmodel

@model List<showallStudent>

@{
    Layout = "~/Views/Shared/_Sidebar_admin.cshtml";
    int i = 1;
}

@section Styles {
    <link rel="stylesheet" href="~/assets/css/usersAdmin.css" />
    <link rel="stylesheet" href="~/assets/css/dashboardadmin.css" />
    <link rel="stylesheet" href="~/assets/css/style.css" />
    <link href="~/assets/css/Reports.css" rel="stylesheet" />
}


@if (TempData["AlertMessage"] != null)
{
    <div class="alert alert-warning" style="padding:12px; font-size:16px;">
        @TempData["AlertMessage"]
    </div>
}
<style>
    .table-container {
        background: #fff;
        padding: 25px;
        border-radius: 16px;
        box-shadow: 0 4px 14px rgba(0,0,0,0.08);
    }

    .subject-table thead th {
        background-color: #092c4c !important;
        color: #fff !important;
        font-weight: 700;
        padding: 14px 0;
    }

    .subject-table tbody tr td {
        padding: 12px 0;
        font-weight: 600;
    }

    .table_Edit tbody tr:hover {
        background-color: #f3f6fa !important;
    }

    .action-btn {
        padding: 8px 18px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 15px;
        font-weight: 700;
        transition: 0.3s ease;
        margin: 0 4px;
    }

    .pause-btn {
        background-color: #f2994a !important;
        color: #fff !important;
    }

        .pause-btn:hover {
            background-color: #e2b12f !important;
        }

    .delete-btn {
        background-color: #eb5757 !important;
        color: #fff !important;
    }

        .delete-btn:hover {
            background-color: #c44545 !important;
        }

    .Active-btn {
        background-color: #092c4c !important;
        color: #fff !important;
    }
</style>

<div class="page-container">

    <h2 class="fw-bold mb-4">إدارة المستخدمين</h2>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="userTabs" role="tablist">

        <!-- زر الطلاب -->
        <ul class="nav nav-tabs" id="userTabs" role="tablist">

            <!-- زر الطلاب -->
            <li class="nav-item">
                <form asp-controller="UserManagement" asp-action="pandingusers" method="get">
                    <button type="submit" class="nav-link nav-btn @(ViewContext.RouteData.Values["action"].ToString() == "PendingUsers" ? "active" : "")">
                        المستخدمون الجدد
                    </button>
                </form>
            </li>

            <!-- زر المعلمين -->
            <li class="nav-item">
                <form asp-controller="UserManagement" asp-action="NotActiveUsers" method="get">
                    <button type="submit" class="nav-link nav-btn @(ViewContext.RouteData.Values["action"].ToString() == "NotActiveUsers" ? "active" : "")">
                        المستخدمون الموقوفون
                    </button>
                </form>
            </li>

        </ul>



    </ul>

    <div class="tab-<div class="tab-pane fade  " id="teachers">
        <div class="table-container">
            <h5 class="my-4">قائمه   في    </h5>

            <table class="table subject-table table-striped table-hover text-center align-middle table_Edit">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>الاسم</th>
                        <th>الإيميل</th>
                        <th>رقم الهاتف</th>
                        <th>الدور</th>
                        <th>تاريخ التسجيل</th>
                        <th>التحكم</th>
                    </tr>
                </thead>

                <tbody>
                    @foreach (var stu in Model)
                    {

                        <tr>
                            <td>@i</td>
                            <td>@stu.FullName</td>
                            <td>@stu.Email</td>
                            <td>@stu.PhoneNumber</td>
                            <td>@stu.role</td>
                            <td> @stu.createat</td>

                            <td>
                                <form asp-controller="UserManagement" asp-action="SetUsersActive" method="post" style="display:inline;">
                                    <input type="hidden" name="userId" value="@stu.userid" />
                                    <button type="submit" class="action-btn pause-btn">تفعيل </button>
                                </form>
                                <form asp-controller="UserManagement" asp-action="deletuser" method="post" style="display:inline;">
                                    <input type="hidden" name="userId" value="@stu.userid" />
                                    <button type="submit" class="action-btn delete-btn">حذف</button>
                                </form>
                                @* <a class="action-btn pause-btn" href="/homepage/show_portfolio_teacher/@stu.instructorid">عرض</a> *@

                            </td>
                        </tr>
                        i++;
                    }
                </tbody>

            </table>
            <div class="d-flex justify-content-between align-items-center mt-4">

                <!-- زر السابق -->
                @if (ViewBag.CurrentPage > 1)
                {
                    <a class="btn btn-dark px-4"
                       href="@Url.Action("NotActiveUsers", new { page = ViewBag.CurrentPage - 1 })">
                        السابق
                    </a>
                }
                else
                {
                    <button class="btn btn-secondary px-4" disabled>السابق</button>
                }

                <!-- رقم الصفحة -->
                <span class="fw-bold">
                    الصفحة @ViewBag.CurrentPage من @ViewBag.TotalPages
                </span>

                <!-- زر التالي -->
                @if (ViewBag.CurrentPage < ViewBag.TotalPages)
                {
                    <a class="btn btn-dark px-4"
                       href="@Url.Action("NotActiveUsers", new { page = ViewBag.CurrentPage + 1 })">
                        التالي
                    </a>
                }
                else
                {
                    <button class="btn btn-secondary px-4" disabled>التالي</button>
                }

            </div>
        </div>
    </div>

   

















    </div>

</div>

